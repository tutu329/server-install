1、xreal air2 ultra眼镜的购买和使用
    1）眼镜本身无法单独使用，必须用官方支持的安卓手机或beam pro才能使用ar应用
    2）建议购买beam pro，能较好体验自带的空间应用nebula（nebula下可以显示一个app以及一个手机投屏，一共两个并排的屏幕）
    3）接安卓手机的话，要安装的是叫xreal的app，可以显示三个及以上并排的窗口，但意义不大，主要问题是和beam pro下不一样，不一定能很好体验6Dof
    4）ultra + beam pro的使用：
        a）beam pro和眼镜连接，注意苹果电脑的充电线用不了，可能除了原装线，必须是雷电线。
        b）beam pro类似手机，打开后进入“我的眼镜”app
        c）最关键的是，“我的眼镜”的空间界面里，“home”按钮，按一下就会显示空间图标，再按一下会消失，所以可能不清楚而找不到图标。
            可以按2次home，或长按beam右侧的红色按钮，空间图标就会出现在眼镜正中。
        d）beam pro打开“我的眼镜”后：
            中间区域：用于触摸，类似鼠标移动
            home图标：用于显示和关闭空间图标的显示
            右上方的切换按钮：用于后台化“我的眼镜”
        e）眼镜按钮：
            第一个按钮：切换眼镜透明度，共3档
            第二个长条按钮：设置眼镜中的显示亮度（音量需要beam右侧的长条按钮设置）
            眼镜2个按钮的长按涉及到自定义功能
        f）beam按钮：
            红色按钮：长按用于复位空间图标位置
            长条按钮：条件音量
            第三个按钮：锁屏

2、unity的安装
    1）unity和unity 3D是指同一个软件
    2）安装unity hub：unity.cn中，安装unity hub
    3）安装unity（不行，build时发现openjdk、sdk、ndk没有）：
        a）不建议通过unity hub安装，因为出一点小错会导致整个系统无法正常启动
        b）单独下载安装：unity的2022长期支持版本(LTS)最新版
        c）单独下载：
            android sdk(developer.android.com/studio?hl=zh-cn，来自于xreal.gitbook.io)
            下载并安装：Android Build Support(https://unity.cn/releases/lts/2022的”查看Release Notes“，找到对应unity版本和操作系统版本的”Android Build Support“下载)
        d）单独下载安装(似乎不需要)
            java jdk和jre(https://www.oracle.com/java/technologies/downloads/)
            jdk22(https://download.oracle.com/java/22/latest/jdk-22_windows-x64_bin.msi)
            jre8(注意要点击一下下“JRE 8”这里，才能显示下载内容，然后注册oracle账户才能下载(jack.seaver@163.com:Jackseaver_112279))
            环境变量设置：
                JAVA_HOME：设置为如, d:\java\jdk-22
                PATH：增加%JAVA_HOME%\bin和d:\java\jre-8u421\bin
                记得点击“确定”按钮
                新开控制台，输入java或java -version验证已经正确安装
    4）用unity hub安装unity(https://unity.cn/releases/lts/2022)
        a）必须选中Android SDK & NDK Tools和OpenJDK
        b）必须退出360程序
        安装中，visual studio community可能安装报错，其他都正确，暂时不用管。此时可以新建项目并通过build。
        关于编译中的报错：Gradle build failed(用unity hub重新安装unity后，就正常了，可能主要是把unity安装在如D:\unity_install\editor\2022.3.37f1c1z这样比较浅的目录里，而不是之前过于深的目录里)

3、unity设置(xreal.gitbook.io, 可能需要tz)
    1）运行unity后，会进入hub，检查unity hub的设置，主要是: 偏好设置->安装->安装位置要对应好，特别是安装了多个版本时。
    2）下载NRSDK for unity(developer.xreal.com/download)
    3）新建项目，选择3D（Built-In Render Pipeline），确定后进入主界面
    4）导入NRSDK
        a)点选左下角Project中的Assets后，Assets->Import Package->Custom Package，选择下载的NRSDK文件，然后确保全选中，点击“Import”
        b)通过 NRSDK->Project Tips->Accept All, 处理存在的问题
    5）系统设置和demo使用
        a)设置系统参数：菜单File->Build Settings: 选择Android，点击“Switch Platform”，然后点击”Player Settings...“，按要求设置(xreal.gitbook.io/nrsdk/nrsdk-fundamentals/quickstart-for-android)
        b)设置NRSDK：界面Project->Assets->NRSDK->NRProjectConfig中，打开Plane Finding和Image Tracking
        c)导入NRSDK的演示案例HelloMR：
            1）界面Project->Assets->NRSDK->Demos->HelloMR
            2）很关键：此时需要在下方Project窗口中点击右上方的”Search by Type“按钮，并选择”scene“，此时所有demo文件夹变为图标形式，就能双击并使上方的三维场景中显示所选择scene，然后build中也能通过”Add Open Scene“导入该scene了。
            3）然后通过菜单File->Build Settings->Add Open Scene导入
        d)build，成功生成apk文件
        e)眼镜运行demo
            1）打开手机设备的开发者模式，通常是在”关于手机“的”软件版本“或”Build号“上连续点击7次，系统会显示开发者模式已经打开
            2）然后可以在”系统和更新“的”开发人员选项“里打开”USB调试“，然后再连接PC。点击Build and Run，就能把这个scene对应的apk传到设备如beam pro上
            3）断开beam pro和pc，连接眼镜，眼镜的空间图标中，即可以看到apk对应的app图标，如prj1，点击就能进入，能看见如HelloMR-3dof的那几个三维的XREAL字。

4、unity中Android Logcat
    1）unity打开window->package manager
    2）上方Package类型改为Unity Registry，并搜索android
    3）然后选择Android Logcat，点击install即可
    4）unity中可以打开window->Analysis->Android Logcat

5、unity的wifi adb
    1）方便执行adb：设置系统的path变量：D:\unity_install\editor\2022.3.37f1c1\Editor\Data\PlaybackEngines\AndroidPlayer\SDK\platform-tools
    2）beam通过usb连接pc，然后执行：
        a）adb tcpip 5555
        b）adb connect 192.168.124.25:5555(192.168.124.25为beam的ip地址)
    3）然后即可拔掉usb线。以后每次执行完b）之后，一段时间内，unity的build里就能看到wifi下的beam，可以直接build and run到beam里。
    4）有时报错：adb server version (32) doesn't match this client (41); killing...
        有线连一下，然后执行adb tcpip 5555，即可（可能和360等软件有关）

6、unity中的TextMesh Pro对象导入中文字体
    0）使用：Hierarchy里新建一个Text(TMP),Font Asset设置为后面生成的字体即可。
    1）创建字体：
        打开unity的windows->TextMeshPro->Font Asset Creator
        Source Font File选择一个字体（字体可以直接从windows\fonts里拖一个到Assets下的TextMesh Pro->Resources->Fonts & Materials里）
        Sampling Point Size似乎用Auto即可
        Padding暂时用0
        Packing Method暂时用Fast
        Atlas Resolution用4090和4096
        Character Set用Characters from File
        Character File用下载的20000个汉字表+符号+英文字符集.txt
        Render Mode暂时用SDFAA_HINTED，AA结尾的是快而质量低，HINTED结尾的是将字符像素与纹理像素对齐以获得更清晰的结果
        Get Kerning Paris暂时选中
        然后点击generate，然后存盘即可
    2）用的时候，Text(TMP)里
        Extra Settings->Shader，必须选择不是Bitmap的，否则字看起来一片模糊

7、关于unity导入和新建c#文件的位置
    1）assetstore.unity.com项目，点击open in unity后，unity hub会有一下反应，而后续又没有新项目被打开。而实际情况是，手动打开unity而不是hub，就能看到项目并下载导入。
    2）导入TMPro等库后，vs下using无效：
        a）找到了using无效的原因：c#文件创建在了Asserts->NRSDK->Input->Script下(文件没有指向Assebly-CSharp.dll）
        b）解决办法，要在Assets下或者Assets->c#（新建的文件夹）下，而不是在Asserts->NRSDK->Input->Scripts下，新建c#代码。这样才能保证c#文件的Assembly Information里不是NRSDK.dll而是Assebly-CSharp.dll。

8、关于unity的c#的线程机制
    1)task为线程机制，但task中不能直接访问unity的对象或api（这些对象在unity主线程中），需要做特殊处理，获取主线程context
        a）awake中声明：private SynchronizationContext syncContext;
        b）start中关联：syncContext = SynchronizationContext.Current;
        c）task中调用：syncContext.Post((function => { UpdateUnityUI(msg); }), null);
    2）协程机制：为主线程中运行，可以用于定时处理短流程，似乎无法用于运行长流程（界面主线程会阻塞，需要用task或thread而不是协程来解决）。

9、unity安装NuGetForUnity
    1)package manager安装：https://github.com/GlitchEnzo/NuGetForUnity.git?path=/src/NuGetForUnity

10、unity安装redis
    1)NuGetForUnity搜索Redis，安装StackExchange.Redis，即可
    2）c#中：
        引用：using StackExchange.Redis;
        代码：
            ConnectionMultiplexer m_redis_connect;
            IDatabase m_redis;
            m_redis_connect = ConnectionMultiplexer.Connect("localhost:6379");
            m_redis = m_redis_connect.GetDatabase();
            m_redis.StringSet("cmd_key", "Redis你好");
            string res = m_redis.StringGet("cmd_key");
    3)用NuGetForUnity安装重要库：System.Runtime.CompilerServices.Unsafe（不安装，则game模式正常，而build and run时报错）

11、unity常见问题
    1）将c#代码拖到组件上时报错can't add script：
        解决方式，要确保c#文件的文件名和class名称，不能和已有文件名和class名称重复。
    2）名字空间：
        a）main.cs中如果要调用NRinput等库，只需要加入名字空间using NRKernal即可
        b）scene中如已建一个组件及其对应c#，则复制该组件及c#后，全局空间下的数据类如ChatCompletionResponse容易重复，此时可以考虑用namespace Openai_1和namespace Openai_2来区分。
    3）package安装：
        a）如openai包的安装，依赖test-framework：
            1）下载https://github.com/needle-mirror/com.unity.test-framework/releases中的压缩文件，解压后，用unity的package manager的install from dick打开其中的package.json安装即可。
            2）然后再安装openai包即可（需按照https://github.com/RageAgainstThePixel/com.openai.unity的要求按照）
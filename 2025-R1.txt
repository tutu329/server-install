一、安装
1、安装verl
    conda create -n zero python=3.12
    conda activate zero

    git clone https://github.com/Jiayi-Pan/verl
    cd verl
    pip install -e .

    pip install flash-attn --no-build-isolation(安装fa2，要3090及以上的卡)
    pip install wandb IPython matplotlib
    pip install vllm==0.5.4(0.6.3会报错：No module named 'vllm._version')
2、下载TinyZero
    git clone https://github.com/Jiayi-Pan/TinyZero

二、zero测试
1、测试数据生成
    cd TinyZero
    mkdir my_data
    python ./examples/data_preprocess/countdown.py --local_dir ./my_data
2、训练
1)修改配置
    a）train_tiny_zero.sh
        修改：trainer.logger=['wandb'] 改为 trainer.logger=['console']
        增加：actor_rollout_ref.rollout.dtype=half \
    b）相对于官方提供的环境变量，增加下面两行
        export ROLLOUT_TP_SIZE=4
2）运行
    export N_GPUS=8
    export BASE_MODEL=/home/tutu/models/Qwen2.5-1.5B
    export DATA_DIR=/home/tutu/TinyZero/my_data
    export EXPERIMENT_NAME=countdown-qwen2.5-1.5b
    export VLLM_ATTENTION_BACKEND=XFORMERS
    chmod +x scripts/train_tiny_zero.sh
    ./scripts/train_tiny_zero.sh
3）报错：
    a）3090正常运行，但20G会OOM，有已下部分结果：
(main_task pid=67136) --------------------------------
(main_task pid=67136) Target: 22 | Numbers: [77 27  6 21]
(main_task pid=67136) Extracted equation: None
(main_task pid=67136) Solution string: A conversation between User and Assistant. The user asks a question, and the Assistant solves it. The assistant first thinks about the reasoning process in the mind and then provides the user with the answer.
(main_task pid=67136) User: Using the numbers [77, 27, 6, 21], create an equation that equals 22. You can use basic arithmetic operations (+, -, *, /) and each number can only be used once. Show your work in <think> </think> tags. And return the final answer in <answer> </answer> tags, for example <answer> (1 + 2) / 3 </answer>.
(main_task pid=67136) Assistant: Let me solve this step by step.
(main_task pid=67136) <think>Now I have two possible solutions</think></thangives me what they are: <think>15/3 = 5</think></thangives me that one.</thightext (27 - 6 + 21) / 7 = 22(Answer)</thangives me that one.</userid>15 / 3 = 5<g>there you go</g></userid><|endoftext|>
(main_task pid=67136) No equation found
(main_task pid=67136) --------------------------------

    b）4029-2080ti服务器报错：
        RuntimeError: FlashAttention only supports Ampere GPUs or newer.
